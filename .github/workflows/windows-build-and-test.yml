name: Windows
on: [push]
jobs:
  Windows:
    name: build-windows
    runs-on: windows-latest
    steps:
      - name: Installing dependencies (Windows)
        run: vcpkg install --recurse --triplet x64-windows zlib:x64-windows libpng:x64-windows libjpeg-turbo:x64-windows tiff:x64-windows freeglut:x64-windows
      - name: Checkout
        uses: actions/checkout@v3
      - name: Creating build directory (Windows)
        run: mkdir build
      - name: Running CMake (Windows)
        run: cmake .. -DCMAKE_BUILD_TYPE=Release -DBUILD_TESTING=ON -DCMAKE_TOOLCHAIN_FILE=${{ env.VCPKG_INSTALLATION_ROOT }}/scripts/buildsystems/vcpkg.cmake
        working-directory: ${{ github.workspace }}/build
      - name: Build (Windows)
        run: cmake --build .
        working-directory: ${{ github.workspace }}/build
      - name: Tests (Windows)
        run: ctest
        working-directory: ${{ github.workspace }}/build
